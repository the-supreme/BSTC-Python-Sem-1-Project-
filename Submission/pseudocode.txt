admin.txt
#adminID|username|password|adminName
admin01|suranjan|thesupreme|Suranjan Rajendran

coaches.txt
coachID|username|password|coachName

-> ["coachID", "username", "password", "coachName"]
CC00

receptionists.txt
receptionistID|username|password|receptionistName

trainees.txt
traineeID|username|password|traineeName|traineeIC|traineeContact|traineeEmail|traineeAdress|
TR00

users.txt
username|password|role

sport_programs.txt
SportID|SportName|CoachID|Fee|Schedule|Venue
SP00

enrollments.txt
TraineeID|SportID|TotalFee|AmountPaid|Status
TR00

payments.txt
TransactionID|TraineeID|SportID|AmountPaid|PaymentDate|Month
TS00

requests.txt
RequestID|TraineeID|CurrentTrainingID|NewTrainingID|Status
RQ00

aeroplane
car
apple 
banana



aeroplane
car
grape
apple
banana


#validate user

START bstcManagementSystem
CREATE username
CREATE password
CREATE user_role = None
OUTPUT("Welcome to Brilliant Sport Training Centre Online Management System!")
OUTPUT("Please enter your username:  ")
INPUT into username
OUTPUT("Please enter your password:  ")
INPUT into password
with open(users.txt, "r") as file:
    for line in file:
        data = line.strip().split("|")

        IF data[0] == username AND data[1] == password THEN
            user_role = data[2] 
            break

    IF user_role == None THEN
        OUTPUT("Invalid credentials. Try again.")
    
    OUTPUT("Login Successful. User Role: ", user_role)

    #route user to right menu
    IF user_role == "admin" THEN
        admin_menu()
    ELSE IF user_role == "receptionist" THEN
        receptionist_menu()
    ELSE IF user_role == "trainer" THEN
        trainer_menu()
    ELSE IF user_role == "trainee" THEN
        trainee_menu()

# HELPER FUNCTION - Generate New ID
DEFINE generate_id(filename, prefix):
    # 1. check if the file exists
    if FILE not exist THEN
        return f"{prefix}01"
    
    with open(filename, "r") as file:
        lines = file.readlines()

    # 2. check if the file is empty
    IF not lines THEN
        return f"{prefix}01"
    
    # 3. find highest existing number
    CREATE INTEGER max_id = 0

    for line in lines:
        data = line.strip.split("|")
        current_id_str = data[0] #assume id is always at index 0

        # remove prefix to get only the number part
        numeric_part = current_id_str[len(prefix):]

        IF numeric_part.isdigit() THEN
            current_num = int(numeric_part)
            IF current_num > max_id THEN
                max_id = current_num

    # Increment and format the ID
    new_num = max_id + 1
    new_id = f"{prefix}{new_num:02d}"

    return new_id
    
# New User Sign In Details File Update
DEFINE newUserSignIn(userID, username, password)
    newUser = [userID, username, password]
    newUserText = "|".join(newUser)
     
    with open("users.txt", "a") as file:
        file.write(newUserText)

# Admin
DEFINE admin_menu()
    CREATE actionChoice = ""
    with open("admins.txt", "r") as file:
        for admin in file:
            admin_data = admin.strip.split("|")
            IF admin.strip.split("|")[1] == username THEN 
                OUTPUT("Welcome back ", username)
    OUTPUT("Please select an action: ")
    OUTPUT("1. Update Profile")
    OUTPUT("2. Register New Coach")
    OUTPUT("3. Delete Existing Coach")
    OUTPUT("4. Register New Receptionist")
    OUTPUT("5. Delete Existing Receptionist")
    OUTPUT("6. View monthly income report")
    INPUT into actionChoice
    IF actionChoice == "1" THEN
        CREATE newName
        CREATE newUsername
        CREATE newPassword
        OUTPUT("PROFILE UPDATE MENU")
        OUTPUT("Name: ")
        INPUT into newName
        OUTPUT("username: ")
        INPUT into newUsername
        OUTPUT("New Password:  ")
        INPUT into newPassword

        with open("admins.txt", "r") as file:
            lines = file.readlines()

        updated_lines = []

        FOR line in lines
            admin_data = line.strip().split("|")
            if admin_data[1] == username:
            admin_data[1] = newUsername
            admin_data[2] = newPassword
            admin_data[3] = newName
        
    ELSE IF actionChoice == "2" THEN
        CREATE newCoach = [CC07, "Arman", "arman123", "Arman Kasim"]
        CREATE coachName = ""
        CREATE coachUsername = ""
        CREATE coachPassword = ""
        OUTPUT("NEW COACH REGISTERATION MENU")
        OUTPUT("Please enter Coach's Username:  ")
        INPUT into coachUsername
        newCoach.append(coachUsername)
        OUTPUT("Please enter Coach's Password:  ")
        INPUT into coachPassword
        newCoach.append(coachPassword)
        OUTPUT("Please enter Coach's Name:  ")
        INPUT into coachName
        newCoach.append(coachName)


        newCoachID = generate_id(coaches.txt, "CC")
        newCoach.insert(newCoachID)
        newCoachText = "|".join(newCoach)

        with open("trainers.txt", "a") as file:
            file.write(newCoachText)

        newUserSignIn(coachUsername, coachPassword, userrole)

        OUTPUT("Registration Complete!")
    
    ELSE IF actionChoice == "3" THEN
        CREATE coachUsername = ""
        CREATE coachPassword = ""
        CREATE deleteChoice = 
        OUTPUT("EXISTING COACH DELETE MENU")
        OUTPUT("Please enter the coach's username: ")
        INPUT into coachUsername
        OUTPUT("Please enter the coach's password: ")
        INPUT into coachPassword
        
        OUTPUT("Please confirm your action: DELETE", username)
        INPUT into deleteChoice
        IF deleteChoice == "yes" THEN       #make sure the yes can be any case(change the input to uppercase for safety)
            with open("coaches.txt", "r") as file:
                lines = file.readlines()
            with open("coaches.txt", "w") as file:
                for coaches in file:
                    if (coaches.split("|")[1] != coachUsername AND coaches.split("|")[2] != coachPassword):
                        file.write(coaches)
                    
        OUTPUT("Coach {coachUsername} has been successfully deleted!")

    ELSE IF actionChoice == "4" THEN
        CREATE newReceptionist = []
        CREATE receptionistName = ""
        CREATE receptionistUsername = ""
        CREATE receptionistPassword = ""
        OUTPUT("NEW RECEPTIONIST REGISTERATION MENU")
        OUTPUT("Please enter Receptionist's Username:  ")
        INPUT into receptionistUsername
        newReceptionist.append(receptionistUsername)
        OUTPUT("Please enter Receptionist's Password:  ")
        INPUT into receptionistPassword
        newReceptionist.append(receptionistPassword)
        OUTPUT("Please enter Receptionist's Name:  ")
        INPUT into receptionistName
        newReceptionist.append(receptionistName)

        newReceptionistID = generate_id(coaches.txt, "CC")
        newReceptionist.insert(newReceptionistID)
        newReceptionistText = "|".join(newReceptionist)

        with open("receptionists.txt", "a") as file:
            file.write(newReceptionistText)

        newUserSignIn(newReceptionistID, receptionistUsername, receptionistPassword)
            
        OUTPUT("Receptionist Registration Complete!")
    
    ELSE IF actionChoice == "5" THEN
        CREATE receptionistUsername = ""
        CREATE receptionistPassword = ""
        CREATE deleteChoice = ""
        OUTPUT("EXISTING RECEPTIONIST DELETE MENU")
        OUTPUT("Please enter the receptionist's username: ")
        INPUT into receptionistUsername
        OUTPUT("Please enter the receptionist's password: ")
        INPUT into receptionistPassword
        
        OUTPUT("Please confirm your action: DELETE", receptionistUsername)
        INPUT into deleteChoice
        IF deleteChoice == "yes" THEN       #make sure the yes can be any case(change the input to uppercase for safety)
            with open("receptionists.txt", "r") as file:
                lines = file.readlines()
            with open("receptionists.txt", "w") as file:
                for receptionists in file:
                    if (receptionists.split("|")[1] != receptionistUsername AND receptionists.split("|")[2] != receptionistPassword):
                        file.write(receptionists)
                    
        OUTPUT("Receptionist {receptionistUsername} has been successfully deleted!")
    
    ELSE IF actionChoice == "6" THEN: #view income report
        CREATE STRING sport_training_input = "", month_input = "", target_id = ""
        CREATE monthly_income = 0
        OUTPUT("VIEW MONTHLY INCOME REPORT MENU")
        # input the month and sport
        OUTPUT("PLEASE ENTER THE SPORT TRAINING: ")
        input into sport_training_input
        OUTPUT("PLEASE ENTER THE MONTH: ")
        input into month_input

        with open("sport_programs.txt", "r") as file:    
            for line in file:
                if line.split("|")[1] = sport_training_input:
                    target_id = line.split("|")[0]
                break

        if target_id == "":
        print("Sport not found!")
        return 

        with open("payments.txt", "r") as file:
            for line in file:
                data = line.strip.split("|")

                if data[0] == target_id AND  data[5] == month_input:
                    monthly_income += float(data[3])
                
            OUTPUT("-" * 30)
            OUTPUT(f"REPORT: {sport_training_input} (Month: {month_input})")
            OUTPUT(f"Total Income: RM {monthly_income}")
            OUTPUT("-" * 30)


# Receptionist
DEFINE receptionist_menu()
    CREATE actionChoice = ""
    with open("receptionists.txt", "r") as file:
        for receptionist in file:
            receptionist_data = receptionist.strip.split("|")
            IF receptionist.strip.split("|")[1] == username THEN 
                OUTPUT("Welcome back ", username)
    OUTPUT("Please select an action: ")
    OUTPUT("1. Update Profile")
    OUTPUT("2. Register New Trainee")
    OUTPUT("3. Enrol Trainee in Sport Training Program")
    OUTPUT("4. Update Sport Training Programme of Trainee")
    OUTPUT("5. Delete Existing Receptionist")
    OUTPUT("6. View monthly income report")
    INPUT into actionChoice
    IF actionChoice == "1" THEN 
        CREATE newName
        CREATE newUsername
        CREATE newPassword
        OUTPUT("PROFILE UPDATE MENU")
        OUTPUT("Name: ")
        INPUT into newName
        OUTPUT("username: ")
        INPUT into newUsername
        OUTPUT("New Password:  ")
        INPUT into newPassword

        with open("receptionist.txt", "r") as file:
            lines = file.readlines()

        updated_lines = []

        FOR line in lines
            receptionist_data = line.strip().split("|")
            if receptionist_data[1] == username:
            receptionist_data[1] = newUsername
            receptionist_data[2] = newPassword
            receptionist_data[3] = newName

    ELSE IF actionChoice == "2" THEN
        CREATE newTrainee = []
        CREATE traineeName = ""
        CREATE traineeUsername = ""
        CREATE traineePassword = ""
        CREATE traineeContact = ""
        CREATE traineeAddress = ""
        CREATE traineeEmail = ""
        CREATE traineeSportChoice = ""
        OUTPUT("NEW TRAINEE REGISTRATION MENU")
        OUTPUT("Create a new trainee's USERNAME: ")
        INPUT into traineeUsername
        newTrainee.append(traineeUsername)
        OUTPUT("Please enter trainee's PASSWORD: ")
        INPUT into traineePassword
        newTrainee.append(traineePassword)
        OUTPUT("Please enter trainee's NAME: ")
        INPUT into traineeName
        newTrainee.append(traineeName)
        OUTPUT("Create a new trainee's PASSPORT NUM/IC NUM: ")
        INPUT into traineePassport
        newTrainee.append(traineePassport)
        OUTPUT("Please enter trainee's CONTACT NUMBER: ")
        INPUT into traineeContact
        newTrainee.append(traineeContact)
        OUTPUT("Please enter trainee's EMAIL: ")
        INPUT into traineeEmail
        newTrainee.append(traineeEmail)
        OUTPUT("Create a new trainee's ADRESS: ")
        INPUT into traineeAdress
        newTrainee.append(traineeAddress)

        CREATE sport_choices = []

        with open("sport_programs.txt", "r") as file:
            lines = file.readlines()

        for line in lines:
            sport_choices.append(line[1])
        
        OUTPUT("Sport Training Choices")
        for i in range(len(sport_choices)):
            print(f"{i}. {sport_choices[i]}")
        
        OUTPUT(f"Please enter trainee's Sport Training Programme(1 - {len(sport_choices)}): ")
        INPUT into traineeSportChoice

        if traineeSportChoice.isdigit AND traineeSportChoice <= len(sport_choices) THEN
            with open("sport_programs.txt", "r") as file:
                lines = file.readlines()

            for line in lines:
                data = line.strip.split("|")
                if data[1] == sport_choices[traineeSportChoice]
                traineeSport = data[1]
                
        newTrainee.append(traineeSportChoice)
        newTraineeID = generate_id(trainees.txt, "TR")
        newTrainee.insert(newTraineeID)

        newTraineeText = "|".join(newTrainee)

        with open("trainees.txt", "a") as file:
            file.write(newTraineeText)

        totalFee = 0
        amountPaid = 0
        status = Unpaid
        newEnrollmentData = [newTraineeID, traineeSport, totalFee, amountPaid, status]
        with open("enrollments.txt", "a") as file:
            newEnrollmentText = "|".join(newEnrollmentData)
            file.write(newEnrollmentText)

        newUserSignIn(newTraineeID, traineeUsername, traineePassword)
        
        OUTPUT("Registration Complete!")

    ELSE IF actionChoice == "3" THEN
        OUTPUT("UPDATE TRAINEE'S SPORT TRAINING PROGRAMME MENU")
        

    ELSE IF actionChoice == "4" THEN 
        OUTPUT("ACCEPT PAYMENT FROM TRAINEE MENU")
        - add?
        - or to delete
        - or to edit(change the existing to new)

        - input name and username
        - input actionChoice(ADD, DELETE, EDIT)
        - IF ADD
        - create a list of sport_programs available
        - open sport_programs.txt to input
        - append to list second item on each line of sport_programs
        - display the list in text format (eg. 1. badminton 2. kabbadi)
        - input sport_choice(in numbers)
        - if the input is a digit and is under the length of the list of sports
        - open the enrollment.txt to input
        - append new line with the defaults and sport*programs list[sport*_choice] as the sport
- IF DELETE

DEFINE coach_menu()
    CREATE actionChoice = ""
    with open("coaches.txt", "r") as file:
        for coach in file:
            coach_data = coach.strip.split("|")
            IF coach_data[1] == username THEN 
                OUTPUT("Welcome back ", username)

    OPEN coaches.txt for input
    READ all lines into memory

    LOOP coach line by line
        data = coach.strip.split("|") 
        IF username == data[1] AND password == data[2] THEN
            coachID = data[0]
    ENDLOOP

    OUTPUT("Please select an action: ")
    OUTPUT("1. Update Profile")
    OUTPUT("2. Add Training Programs")
    OUTPUT("3. Update Training Program Details")
    OUTPUT("4. View List of Trainees enrolled")
    INPUT into actionChoice
    IF actionChoice == "1" THEN 
        CREATE newName
        CREATE newUsername
        CREATE newPassword
        OUTPUT("PROFILE UPDATE MENU")
        OUTPUT("Name: ")
        INPUT into newName
        OUTPUT("username: ")
        INPUT into newUsername
        OUTPUT("New Password:  ")
        INPUT into newPassword

        with open("coaches.txt", "r") as file:
            lines = file.readlines()

        FOR line in lines
            coach_data = line.strip().split("|")
            if coach_data[1] == username:
            coach_data[1] = newUsername
            coach_data[2] = newPassword
            coach_data[3] = newName
        
    ELSE IF actionChoice == "2" THEN

        CREATE newSportName
        CREATE newSportFee
        CREATE newSportSchedule
        CREATE newSportVenue

        OUTPUT("ADD TRAINING PROGRAM MENU")
        OUTPUT("Please enter new Sport Name: ")
        input into newSportName
        OUTPUT("Please enter new Sport's Fee: ")
        input into newSportFee
        OUTPUT("Please enter new Sport's Schedule: ")
        input into newSportSchedule
        OUTPUT("Please enter new Sport's Venue: ")
        input into newSportVenue

        newSportProgramData = [generate_id(sport_programs.txt, "SP"), newSportName, coachID, newSportFee, newSportSchedule, newSportVenue]
        newSportProgramText = "|".join(newSportProgramData)
        OPEN sport_programs.txt for append
            write newSportProgramText into file
        EOF

    ELSE IF actionChoice == "3" THEN
        CREATE updateSportChoice
        OUTPUT("UPDATE TRAINING PROGRAM MENU")
        sport_programs = []
        OPEN sport_programs.txt for input
            READ lines to input

        LOOP through each line
            data = line.strip.split("|")
            IF data[2] == coachID THEN
                append data[1] to sport_programs
        ENDLOOP

        OUTPUT("Which training program would you like to update?")
        CREATE INTEGER cnt = 0
        LOOP cnt FROM 0 to len(sport_programs)
            OUTPUT(f"{cnt + 1}. {sport_programs[cnt]}")
        ENDLOOP

        OUTPUT("Please enter a digit")
        INPUT into updateSportChoice
        IF updateSportChoice.isdigit AND updateSportChoice <= len(sport_programs)
            OUTPUT("Please enter the new FEE for {sport_programs[updateSportChoice - 1]}")
            INPUT into newSportFee
            OUTPUT("Please enter the new SCHEDULE for {sport_programs[updateSportChoice - 1]}")
            INPUT into newSportSchedule
            OUTPUT("Please enter the new VENUE for {sport_programs[updateSportChoice - 1]}")
            INPUT into newSportVenue

        OPEN sport_programs.txt for input
            READ lines into input
        
        LOOP through lines
            data = line.strip.split("|")
            IF data[1] == sport_programs[updateSportChoice - 1] AND data[2] == coachID THEN
                data[3] = newSportFee
                data[4] = newSportSchedule
                data[5] = newSportVenue

        ENDLOOP

        OUTPUT("Sport Training Program has been Updated")

    ELSE IF actionChoice == "4"
        CREATE deleteSportChoice
        OUTPUT("DELETE TRAINING PROGRAM MENU")
        sport_programs = []
        OPEN sport_programs.txt for input
            READ lines to input

        LOOP through each line
            data = line.strip.split("|")
            IF data[2] == coachID THEN
                append data[1] to sport_programs
        ENDLOOP

        OUTPUT("Which training program would you like to delete?")
        CREATE INTEGER cnt = 0
        LOOP cnt FROM 0 to len(sport_programs)
            OUTPUT(f"{cnt + 1}. {sport_programs[cnt]}")
        ENDLOOP

        OUTPUT("Please enter a digit")
        INPUT into deleteSportChoice
        IF deleteSportChoice.isdigit AND deleteSportChoice <= len(sport_programs)
            OPEN sport_programs.txt for READ   
                read lines into memory
            
            OPEN sport_programs.txt for write
            LOOP through lines
                data = line.strip.split("|")
                IF data[1] != sport_programs[deleteSportChoice] and data[2] != coachID THEN
                    WRITE INTO file

                ENDIF

            ENDLOOP
        ELSE 
            OUTPUT("Delete unsuccessful. Choice of Sport not found.")
        ENDIF
    ELSE IF actionChoice == "5"
        target_ids = []
        target_trainees = []
        trainee_names = []
        OUTPUT("View the list of trainees enrolled in training program MENU")
        OPEN sport_programs.txt for INPUT
            READ lines

        for line in lines:
            data = line.strip.split("|")
            if data[2] == coachID THEN 
                APPEND data[0] to target_ids
            ENDIF
        END LOOP

        OPEN enrollments.txt for INPUT
            READ lines
        
        for line in lines:
            data = line.strip.split("|")
            if data[1] in target_ids:
                APPEND data[0] to target_trainees
            
        OPEN trainees.txt for input:
            READ lines

        for line in lines:
            data = line.strip.split("|")
            if data[0] in target_trainees
                APPEND data[3] to trainee_names

        for i in range(len(trainee_names)):
            OUTPUT(f"{i+1}. {trainee_names[i]}")

============================
Trainees List
1. Abu
2. Ali
============================

DEFINE trainee_menu()
    CREATE actionChoice = ""
    with open("trainees.txt", "r") as file:
        for trainees in file:
            trainee_data = receptionist.strip.split("|")
            IF trainee_data[1] == username THEN 
                OUTPUT("Welcome back ", username)

    OPEN trainees.txt for input
    READ all lines into memory

    LOOP trainee line by line
        data = trainee.strip.split("|") 
        IF username == data[1] AND password == data[2] THEN
            traineeID = data[0]
    ENDLOOP

    OPEN enrollments.txt for INPUT
            READ lines into memory
        
    LOOP through lines as line
        data = line.strip.split("|")
        IF data[0] == traineeID THEN
            APPEND data[1] to sportsPlans
    ENDLOOP

    ls_sport_programs = []
    OPEN sport_programs.txt for input   
        READ lines
        
    for line in lines:
        data = line.strip.split("|")
        if data[1] NOT IN ls_sport_programs:
            ls_sport_programs.append(data[1])


    OUTPUT("Please select an action: ")
    OUTPUT("1. Update Profile")
    OUTPUT("2. View Training Schedule")
    OUTPUT("3. Send request to the receptionist to change the training program enrollment")
    OUTPUT("4. Update request (which is still pending) sent to the receptionist to change the training program.")
    OUTPUT("5. Delete the request (which is still pending) sent to the receptionist to change the training program")
    OUTPUT("6. View payment status with the total balance that needs to be paid, if any")
    INPUT into actionChoice
    IF actionChoice == "1" THEN 
        CREATE newName
        CREATE newUsername
        CREATE newPassword
        OUTPUT("PROFILE UPDATE MENU")
        OUTPUT("Name: ")
        INPUT into newName
        OUTPUT("username: ")
        INPUT into newUsername
        OUTPUT("New Password:  ")
        INPUT into newPassword

        with open("trainees.txt", "r") as file:
            lines = file.readlines()

        FOR line in lines
            trainee_data = line.strip().split("|")
            if trainee_data[1] == username:
            trainee_data[1] = newUsername
            trainee_data[2] = newPassword
            trainee_data[3] = newName

    IF actionChoice == "2" THEN 
        OUTPUT("VIEW TRAINING SCHEDULE MENU")
        sportSchedule = []

        OPEN sport_programs.txt for INPUT
            READ lines

        for line in lines:
            data = line.strip.split("|")

            for sports in sportsPlans:
                if data[0] == sports:
                    print("=" * 30)
                    print(f"{data[1]}")
                    print(f"{data[4]}")
                    print("=" * 30)
        
=========================
Badminton
5 pm to 10 pm
=========================

    IF actionChioce == "3" THEN
        OUTPUT("SEND REQUEST TO RECEPTIONIST TO CHANGE TRAINING PROGRAM ENROLLMENT")
        if len(sportsPlans) > 1:
            print("Please choose which sports training program you would like to change. ")
            for i in range len(sportsPlans):
                print(f"{i+1}. {sportsPlans[i]}")  
                INPUT into currentTrainingProgram
                VALIDATE currentTrainingProgram
        else:
            currentTrainingProgram = sportsPlans

            list programs from ls_sport_programs for choosing newSportChoice

            INPUT into newSportChoice
            newRequest = []
            newRequest.append(generate_id(requests.txt, RQ), traineeID, CurrentTrainingProgram, newSportChoice, Pending)

            OPEN requests.txt for input            
                newRequestTxt = "|".join(newRequest)
                file.write(newRequestTxt)

        
    IF actionChioce == "4" THEN
        OUTPUT("UPDATE REQUEST THAT IS STILL PENDING")
        OPEN requests.txt for input
            READ lines
        
        LOOP through the lines 
            if data[0] == traineeID
                ADD requestIDs to requestsList
            
        LIST down requests from requestsList
        INPUT into requestUpdateChoice

        LOOP through the lines in requests.txt
            if request data[status] == "Pending"
            INPUT currentTrainingProgram
            INPUT NewTrainingID

            UPDATE data[2], data[3]
        
    
    IF actionChioce == "5" THEN
        OUTPUT("DELETE REQUEST THAT IS STILL PENDING")

        SAME LOOPING PROCEDURE AS actionChoice "4"
        LOOK THROUGH REQUESTS, LIST DOWN, CHOOSE
        CHECK if REQUEST Status pending
        if data[4] == "Pending"
        
            OPEN requests.txt for input
                READ lines

            write into file if its not the line with the deleteRequest
    
    IF actionChioce == "6" THEN
        OUTPUT("VIEW PAYMENT STATUS WITH TOTAL BALANCE")
            

        







        




            
                
            


